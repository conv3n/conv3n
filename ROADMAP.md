# Дорожная карта CONV3N

> **Видение**: Самостоятельно размещаемая, no-code платформа для разработчиков. Молниеносно быстрая (Go + Bun), полностью open-source, без платных функций.

---

## Фаза 1: Основа (ВЫПОЛНЕНО ✅)

### Основной движок
- [x] Оркестратор на Go с выполнением рабочих процессов
- [x] Воркер на Bun для выполнения блоков
- [x] Разрешитель переменных (`{{ $node.ID.data.field }}`)
- [x] HTTP API сервер (`POST /api/run`, `GET /health`)
- [x] Режим CLI (`conv3n run workflow.json`)
- [x] Базовый блок: `std/http_request`

**Статус**: MVP ядра функционален. Может выполнять рабочие процессы через API или CLI.

---

## Фаза 2: Библиотека блоков (Следующий приоритет)

### Стандартные блоки
Реализовать основные блоки для реальных рабочих процессов:

- [ ] `std/transform` - Сопоставление и преобразование данных
  - Запросы JSONPath
  - Переименование/реструктуризация полей
  - Преобразование типов
- [ ] `std/condition` - Условное ветвление (if/else)
  - Вычисление выражений
  - Несколько путей вывода
- [ ] `std/loop` - Итерация по массиву
  - Отображение элементов
  - Пакетная обработка
- [ ] `std/delay` - Задержки по времени
- [ ] `std/webhook` - Входящие HTTP вебхуки
  - Динамическая генерация конечных точек
  - Валидация полезной нагрузки
- [ ] `std/database` - Операции с базами данных
  - SQLite (основная)
  - Коннекторы PostgreSQL/MySQL
- [ ] `std/file` - Операции с файловой системой
  - Чтение/запись файлов
  - Операции с директориями

### Пользовательский блок кода (УБИЙСТВЕННАЯ ФУНКЦИЯ) ✅
- [x] `custom/code` - Пользовательский TypeScript/JavaScript
  - Выполнение в среде Bun
  - Типобезопасный ввод/вывод
  - Поддержка импорта пакетов NPM (через dynamic import)
  - Валидация синтаксиса (Bun.Transpiler)
  - Обработка ошибок со стектрейсами (SyntaxError, RuntimeError, ImportError)

**Цель**: Обеспечить 80% вариантов использования без пользовательского кода, 100% с ним.

---

## Фаза 3: Тестирование и стабильность

### Модульные тесты
- [ ] Тесты ядра движка (`internal/engine`)
  - Выполнение рабочего процесса
  - Разрешение переменных
  - Управление состоянием
- [ ] Тесты блоков (`pkg/blocks/std/*`)
  - Каждый тип блока
  - Сценарии ошибок
- [ ] Тесты API (`cmd/conv3n`)
  - HTTP конечные точки
  - Валидация запросов

### Интеграционные тесты
- [ ] Сквозные сценарии рабочих процессов
- [ ] Бенчмарки производительности (сравнение с n8n)
- [ ] Обнаружение утечек памяти

**Цель**: 80%+ покрытие кода, ноль критических ошибок.

---

## Фаза 4: Уровень хранения данных

### Сохранение рабочих процессов
- [ ] Схема базы данных SQLite
  - Таблица рабочих процессов
  - Таблица выполнений (история)
  - Журналы выполнения
- [ ] CRUD API для рабочих процессов
  - `POST /api/workflows` - Создать
  - `GET /api/workflows/:id` - Прочитать
  - `PUT /api/workflows/:id` - Обновить
  - `DELETE /api/workflows/:id` - Удалить
- [ ] История выполнения
  - Хранение результатов каждого выполнения
  - Запрос прошлых запусков
  - Повторный запуск неудачных выполнений

### Конфигурация
- [ ] Конфигурация на основе окружения
- [ ] Поддержка нескольких окружений (dev/staging/prod)

**Цель**: Постоянные рабочие процессы, история выполнения, готовое к производству хранилище.

---

## Фаза 5: UI (Веб-интерфейс)

### Минимальный UI (v0.1)
- [ ] Простая веб-форма для отправки JSON рабочего процесса
- [ ] Отображение результатов выполнения
- [ ] Просмотр списка рабочих процессов

### Визуальный редактор (v1.0)
- [ ] Конструктор рабочих процессов с перетаскиванием
  - React Flow или аналогичная библиотека
  - Палитра блоков
  - Рисование соединений
- [ ] Панель конфигурации блоков
  - Динамические формы на основе типа блока
  - Выбор переменных (`{{ $node.* }}`)
- [ ] Предварительный просмотр выполнения в реальном времени
  - Пошаговый просмотр выполнения
  - Инспекция данных для каждого блока
- [ ] Редактор кода для пользовательских блоков
  - Monaco Editor (движок VSCode)
  - Подсветка синтаксиса TypeScript
  - Автодополнение

### Функции UX
- [ ] Темный режим (по умолчанию)
- [ ] Горячие клавиши
- [ ] Отмена/Повтор
- [ ] Галерея шаблонов рабочих процессов

**Цель**: Интуитивно понятный UI, который не снижает мощность.

---

## Фаза 6: Расширенные функции

### Движок выполнения
- [ ] Параллельное выполнение (на основе DAG)
  - Топологическая сортировка
  - Параллельное выполнение блоков
- [ ] Стратегии обработки ошибок
  - Повторный запуск с экспоненциальной задержкой
  - Резервные блоки
  - Границы ошибок
- [ ] Триггеры
  - Расписания Cron
  - Триггеры вебхуков
  - Наблюдатели файлов

### Опыт разработчика
- [ ] Валидация рабочего процесса CLI (`conv3n validate workflow.json`)
- [ ] Фреймворк для тестирования рабочих процессов
- [ ] Режим отладки с точками останова
- [ ] Профилирование производительности

### Интеграции
- [ ] Предварительно созданные коннекторы
  - GitHub API
  - Telegram Bot API
  - Discord webhooks
  - Stripe API
  - OpenAI API
- [ ] Система плагинов для пользовательских интеграций

**Цель**: Паритет функций с n8n, но быстрее и бесплатно.

---

## Фаза 7: Готовность к производству

### Развертывание
- [ ] Образ Docker
- [ ] Настройка Docker Compose
- [ ] Манифесты Kubernetes
- [ ] Скрипты развертывания в один клик (Railway, Fly.io)

### Безопасность
- [ ] Аутентификация API (JWT)
- [ ] Контроль доступа на основе ролей (RBAC)
- [ ] Управление секретами (зашифрованные переменные окружения)
- [ ] Ограничение скорости запросов

### Мониторинг
- [ ] Метрики Prometheus
- [ ] Проверки работоспособности
- [ ] Логирование (структурированные JSON логи)
- [ ] Оповещения

### Документация
- [ ] Руководство по началу работы
- [ ] Документация по блокам
- [ ] Документация API (OpenAPI/Swagger)
- [ ] Видеоуроки

**Цель**: Производственная, саморазмещаемая платформа.

---

## Фаза 8: Сообщество и рост

### Открытый исходный код
- [ ] Настройка репозитория GitHub
  - README с убийственной демонстрацией
  - Руководство по участию
  - Кодекс поведения
- [ ] Лицензия: MIT или Apache 2.0
- [ ] Автоматизация журнала изменений

### Маркетинг
- [ ] Публикации в Telegram-канале
- [ ] Обращение к техническим микро-инфлюенсерам (1k+ подписчиков)
- [ ] Запуск на Hacker News
- [ ] Статьи на Dev.to / Hashnode
- [ ] Сравнительные бенчмарки (CONV3N против n8n)

### Сообщество
- [ ] Discord-сервер
- [ ] Обсуждения на GitHub
- [ ] Репозиторий примеров рабочих процессов
- [ ] Вклады сообщества в блоки

**Цель**: Создать сообщество опытных пользователей и контрибьюторов.

---

## Будущие идеи (Бэклог)

- [ ] Мобильное приложение (React Native) для мониторинга
- [ ] Блок AI (интеграция GPT-4, Claude)
- [ ] Визуальный отладчик данных
- [ ] Маркетплейс рабочих процессов (шаблоны сообщества)
- [ ] Многопользовательский режим (опционально, для компаний)
- [ ] Совместная работа в реальном времени (многопользовательское редактирование)
- [ ] Версионирование рабочих процессов (как Git)

---

## Метрики успеха

### Технические
- Скорость выполнения: в 5 раз быстрее, чем n8n
- Использование памяти: <100 МБ для типичных рабочих процессов
- Время запуска: <1 с

### Принятие
- 1 000 звезд на GitHub за первые 6 месяцев
- 100 активных саморазмещенных экземпляров
- 10 контрибьюторов из сообщества

### Признание
- Попадание на главную страницу Hacker News
- Упоминание в рассылках для разработчиков
- Кейсы от реальных пользователей

---

## Текущий статус

**Мы здесь**: Конец Фазы 1
**Следующая веха**: Фаза 2 - Пользовательский блок кода
**Примерное время до v1.0**: 3-6 месяцев (разработка в одиночку)

---

## Примечания

- **Никаких платных функций, никогда.** Это проект сообщества.
- **Нет кошелька для пожертвований.** Признание > деньги.
- **Модульная архитектура.** Проприетарные модули zxink могут быть загружены отдельно.
- **В первую очередь для разработчиков.** Если это не быстро и не мощно, это не стоит строить.

---

*Последнее обновление: 2025-11-25*
